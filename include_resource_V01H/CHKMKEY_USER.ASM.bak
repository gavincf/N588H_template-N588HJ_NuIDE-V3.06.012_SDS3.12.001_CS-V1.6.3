

;==============================
;poi
;===============================




BK0_SCAN_KEY_4CH_USER:

	LDA	#C_BIT0
	BIT	<WB_KEY_FLAG
	BEQ	BK0_SCAN_KEY_4CH_S101
	TRB	<WB_KEY_FLAG

	MACRO_SET_KEYCH0
	.IF ( C_AUTOSLEEP_WAITKEY_EN .EQ. 1 )
	JSR	BK0_AUTOSLEEP_KEYIN
	.ENDIF
	
BK0_SCAN_KEY_4CH_S101:
	LDA	#C_BIT1
	BIT	<WB_KEY_FLAG
	BEQ	BK0_SCAN_KEY_4CH_S102
	TRB	<WB_KEY_FLAG ; CLR FLAG

	MACRO_SET_KEYCH1
	.IF ( C_AUTOSLEEP_WAITKEY_EN .EQ. 1 )
	JSR	BK0_AUTOSLEEP_KEYIN
	.ENDIF
	
BK0_SCAN_KEY_4CH_S102:
	LDA	#C_BIT2
	BIT	<WB_KEY_FLAG
	BEQ	BK0_SCAN_KEY_4CH_S103
	TRB	<WB_KEY_FLAG ; CLR FLAG

	MACRO_SET_KEYCH2
	.IF ( C_AUTOSLEEP_WAITKEY_EN .EQ. 1 )
	JSR	BK0_AUTOSLEEP_KEYIN
	.ENDIF
	
BK0_SCAN_KEY_4CH_S103:
	LDA	#C_BIT3
	BIT	<WB_KEY_FLAG
	BEQ	BK0_SCAN_KEY_4CH_S104
	TRB	<WB_KEY_FLAG ; CLR FLAG

	MACRO_SET_KEYCH3
	.IF ( C_AUTOSLEEP_WAITKEY_EN .EQ. 1 )
	JSR	BK0_AUTOSLEEP_KEYIN
	.ENDIF
	
BK0_SCAN_KEY_4CH_S104:
	JMP	BK0_SCAN_KEY_4CH_USER_RET


;
SCAN_ROW_TBL0: ;matrix key output port:
;----- BP1 ------ xxx ---
	DB	11000000B,00000000B;0
	DB	10000000B,00000000B;1
	DB	01000000B,00000000B;2
	DB	01011100B,11111111B;3
	DB	00111100B,11111111B;4
;	DB	01111100B,11111111B;
;	DB	01111111B,11111111B;

;======================================================
	

KEY_TRANS_TBL0:
;除了XXH，不能有同键
;一行不用的按键位置要用XXH填充,因为程序会扫描到.
; START FROM 0

;------------------------------
; For piano, N567H
;0FEH: NO KEY HERE
;00H-2FH;organ
;30H-3FH;DRUM
;40H-4FH;INS
;54H-5FH;RHY
;60H  : function key
;------------------------------
;最基本表：按顺序转换
;	DB	00H,01H,02H,03H,04H,05H,06H,07H,08H,09H,0AH,0BH,0CH,0DH,0EH,0FH
;	DB	10H,11H,12H,13H,14H,15H,16H,17H,18H,19H,1AH,1BH,1CH,1DH,1EH,1FH
;	DB	20H,21H,22H,23H,24H,25H,26H,27H,28H,29H,2AH,2BH,2CH,2DH,2EH,2FH
;	DB	30H,31H,32H,33H,34H,35H,36H,37H,38H,39H,3AH,3BH,3CH,3DH,3EH,3FH
;	DB	40H,41H,42H,43H,44H,45H,46H,47H,48H,49H,4AH,4BH,4CH,4DH,4EH,4FH
;	DB	50H,51H,52H,53H,54H,55H,56H,57H,58H,59H,5AH,5BH,5CH,5DH,5EH,5FH

;T17C08
	DB	013,14H,XXH
	DB	007,008,009
	DB	010,011,012
	DB	XXH












