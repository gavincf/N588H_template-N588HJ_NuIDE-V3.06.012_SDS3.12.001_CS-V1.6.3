




;-------------------------
;;------------------- POI
;-------------------------

;===============================

;----------------------------------------
	
;//==============================
BK0_SCAN_S_KEY:
;=================================
; check single / io direct key
;=================================
;check KEY1
CHK_KEY1: 
.IF(C_S_KEY1_ENABLE .EQ. 1)
	LDA	#B_S_KEY1
	BIT	!SR_S_KEY1_PORT
	BNE	CHK_KEY1_HIGH
;LOW
	BIT	<R_S_KEY1_STATUS
	BEQ	CHK_KEY1_QUIT
;FALL
	
	LDA	<R_S_KEY1_DEBOUNCE
	BEQ	CHK_KEY1_LOW_S10
	INC	<R_S_KEY1_DEBOUNCE
	BNE	CHK_KEY1_QUIT
;GET KEY
	LDA	#B_S_KEY1
	TRB	<R_S_KEY1_STATUS
	
	JMP	S_KEY1_F
	
S_KEY1_F_RET:
	BRA	CHK_KEY1_QUIT
	
CHK_KEY1_LOW_S10:
	LDA	#C_S_KEY1_DEBOUNCE ; -DEBOUNCE * 5.33MS
	STA	<R_S_KEY1_DEBOUNCE
	BRA	CHK_KEY1_QUIT
CHK_KEY1_HIGH:
	STZ	R_S_KEY1_DEBOUNCE
	BIT	<R_S_KEY1_STATUS
	BNE	CHK_KEY1_QUIT
	TSB	<R_S_KEY1_STATUS

	JMP	S_KEY1_R
	
S_KEY1_R_RET:
CHK_KEY1_QUIT:
.ENDIF
.IF(C_S_KEY2_ENABLE .EQ. 1)
;check KEY2 ; TUMMY
CHK_KEY2:
	LDA	#B_S_KEY2
	BIT	!SR_S_KEY2_PORT
	BNE	CHK_KEY2_HIGH
;LOW
	BIT	<R_S_KEY2_STATUS
	BEQ	CHK_KEY2_QUIT

;FALL

	LDA	<R_S_KEY2_DEBOUNCE
	BEQ	CHK_KEY2_LOW_S10
	INC	<R_S_KEY2_DEBOUNCE
	BNE	CHK_KEY2_QUIT
;GET KEY
	LDA	#B_S_KEY2
	TRB	<R_S_KEY2_STATUS
	
	JMP	S_KEY2_F
S_KEY2_F_RET:
	BRA	CHK_KEY2_QUIT
CHK_KEY2_LOW_S10:
	LDA	#C_S_KEY2_DEBOUNCE ; -DEBOUNCE * 5.33MS
	STA	<R_S_KEY2_DEBOUNCE
	BRA	CHK_KEY2_QUIT
CHK_KEY2_HIGH:
	STZ	R_S_KEY2_DEBOUNCE
	BIT	<R_S_KEY2_STATUS
	BNE	CHK_KEY2_QUIT
	TSB	<R_S_KEY2_STATUS
	
	JMP	S_KEY2_R
	
S_KEY2_R_RET:
CHK_KEY2_QUIT:
.ENDIF
.IF(C_S_KEY3_ENABLE .EQ. 1)
;check KEY3; MOUTH; LEFT SWITCH
CHK_KEY3:
	LDA	#B_S_KEY3
	BIT	SR_S_KEY3_PORT
	BNE	CHK_KEY3_HIGH
;LOW

	BIT	<R_S_KEY3_STATUS
	BEQ	CHK_KEY3_QUIT

;FALL

	LDA	<R_S_KEY3_DEBOUNCE
	BEQ	CHK_KEY3_LOW_S10
	INC	<R_S_KEY3_DEBOUNCE
	BNE	CHK_KEY3_QUIT
;GET KEY
	LDA	#B_S_KEY3
	TRB	<R_S_KEY3_STATUS
	
	JMP	S_KEY3_F
S_KEY3_F_RET:
	BRA	CHK_KEY3_QUIT
	
CHK_KEY3_LOW_S10:; 
	LDA	#C_S_KEY3_DEBOUNCE ; -DEBOUNCE * 5.33MS
	STA	<R_S_KEY3_DEBOUNCE
	BRA	CHK_KEY3_QUIT
CHK_KEY3_HIGH:
	STZ	R_S_KEY3_DEBOUNCE
	
	BIT	<R_S_KEY3_STATUS
	BNE	CHK_KEY3_QUIT

;GET HIGH
	
	LDA	#B_S_KEY3
	TSB	<R_S_KEY3_STATUS
	
	JMP	S_KEY3_R

S_KEY3_R_RET:
CHK_KEY3_QUIT:
.ENDIF
.IF(C_S_KEY4_ENABLE .EQ. 1)
;check KEY4 ; BODY; BALL SWITCH
CHK_KEY4:
	LDA	#B_S_KEY4
	BIT	!SR_S_KEY4_PORT
	BNE	CHK_KEY4_HIGH
;LOW
	BIT	<R_S_KEY4_STATUS
	BEQ	CHK_KEY4_QUIT

;FALL

	LDA	<R_S_KEY4_DEBOUNCE
	BEQ	CHK_KEY4_LOW_S10
	INC	<R_S_KEY4_DEBOUNCE
	BNE	CHK_KEY4_QUIT
;GET KEY
	LDA	#B_S_KEY4
	TRB	<R_S_KEY4_STATUS
	
	JMP	S_KEY4_F
S_KEY4_F_RET:
	BRA	CHK_KEY4_QUIT

CHK_KEY4_LOW_S10:
	LDA	#C_S_KEY4_DEBOUNCE ; -DEBOUNCE * 5.33MS
	STA	<R_S_KEY4_DEBOUNCE
	BRA	CHK_KEY4_QUIT
CHK_KEY4_HIGH:
	STZ	R_S_KEY4_DEBOUNCE
	BIT	<R_S_KEY4_STATUS
	BNE	CHK_KEY4_QUIT
	TSB	<R_S_KEY4_STATUS
	
	JMP	S_KEY4_R

S_KEY4_R_RET:
CHK_KEY4_QUIT:
.ENDIF
.IF(C_S_KEY5_ENABLE .EQ. 1)
;check KEY5 ;  LVD; LOW :< 4.0V
CHK_KEY5:
	LDA	#B_S_KEY5
	BIT	!SR_S_KEY5_PORT
	BNE	CHK_KEY5_HIGH
;LOW
	BIT	<R_S_KEY5_STATUS
	BEQ	CHK_KEY5_QUIT

;FALL

	LDA	<R_S_KEY5_DEBOUNCE
	BEQ	CHK_KEY5_LOW_S10
	INC	<R_S_KEY5_DEBOUNCE
	BNE	CHK_KEY5_QUIT
;GET KEY
	LDA	#B_S_KEY5
	TRB	<R_S_KEY5_STATUS
	
	JMP	S_KEY5_F
S_KEY5_F_RET:
	BRA	CHK_KEY5_QUIT

CHK_KEY5_LOW_S10:
	LDA	#C_S_KEY5_DEBOUNCE ; -DEBOUNCE * 5.33MS
	STA	<R_S_KEY5_DEBOUNCE
	BRA	CHK_KEY5_QUIT
CHK_KEY5_HIGH:
	STZ	R_S_KEY5_DEBOUNCE
	BIT	<R_S_KEY5_STATUS
	BNE	CHK_KEY5_QUIT
	TSB	<R_S_KEY5_STATUS
	
	JMP	S_KEY5_R

S_KEY5_R_RET:
CHK_KEY5_QUIT:
.ENDIF
.IF(C_S_KEY6_ENABLE .EQ. 1)
;check KEY6; DOLL/RPOTTY
CHK_KEY6:
	LDA	#B_S_KEY6
	BIT	!SR_S_KEY6_PORT
	BNE	CHK_KEY6_HIGH
;LOW
	BIT	<R_S_KEY6_STATUS
	BEQ	CHK_KEY6_QUIT

;FALL
	
	LDA	<R_S_KEY6_DEBOUNCE
	BEQ	CHK_KEY6_LOW_S10
	INC	<R_S_KEY6_DEBOUNCE
	BNE	CHK_KEY6_QUIT
;GET KEY
	LDA	#B_S_KEY6
	TRB	<R_S_KEY6_STATUS
	
	JMP	S_KEY6_F
S_KEY6_F_RET:
	BRA	CHK_KEY6_QUIT

CHK_KEY6_LOW_S10:
	LDA	#C_S_KEY6_DEBOUNCE ; -DEBOUNCE * 5.33MS
	STA	<R_S_KEY6_DEBOUNCE
	BRA	CHK_KEY6_QUIT
CHK_KEY6_HIGH:
	STZ	R_S_KEY6_DEBOUNCE
	BIT	<R_S_KEY6_STATUS
	BNE	CHK_KEY6_QUIT
	
	LDA	#B_S_KEY6
	TSB	<R_S_KEY6_STATUS
	
	JMP	S_KEY6_R

S_KEY6_R_RET:
CHK_KEY6_QUIT:
.ENDIF
.IF(C_S_KEY7_ENABLE .EQ. 1)
;check KEY7
CHK_KEY7:
	LDA	#B_S_KEY7
	BIT	!SR_S_KEY7_PORT
	BNE	CHK_KEY7_HIGH
;LOW
	BIT	<R_S_KEY7_STATUS
	BEQ	CHK_KEY7_QUIT
	
;FALL
	
	LDA	<R_S_KEY7_DEBOUNCE
	BEQ	CHK_KEY7_LOW_S10
	INC	<R_S_KEY7_DEBOUNCE
	BNE	CHK_KEY7_QUIT
;GET KEY
	LDA	#B_S_KEY7
	TRB	<R_S_KEY7_STATUS
	
	JMP	S_KEY7_F

S_KEY7_F_RET:
	BRA	CHK_KEY7_QUIT

CHK_KEY7_LOW_S10:
	LDA	#C_S_KEY7_DEBOUNCE ; -DEBOUNCE * 5.33MS
	STA	<R_S_KEY7_DEBOUNCE
	BRA	CHK_KEY7_QUIT
CHK_KEY7_HIGH:
	STZ	R_S_KEY7_DEBOUNCE
	BIT	<R_S_KEY7_STATUS
	BNE	CHK_KEY7_QUIT
	TSB	<R_S_KEY7_STATUS
	
	JMP	S_KEY7_R

S_KEY7_R_RET:
CHK_KEY7_QUIT:
.ENDIF

.IF(C_S_KEY8_ENABLE .EQ. 1)
;check KEY8
CHK_KEY8:
	LDA	#B_S_KEY8
	BIT	!SR_S_KEY8_PORT
	BNE	CHK_KEY8_HIGH
;LOW
	BIT	<R_S_KEY8_STATUS
	BEQ	CHK_KEY8_QUIT
	LDA	<R_S_KEY8_DEBOUNCE
	BEQ	CHK_KEY8_LOW_S10
	INC	<R_S_KEY8_DEBOUNCE
	BNE	CHK_KEY8_QUIT
;GET KEY
	LDA	#B_S_KEY8
	TRB	<R_S_KEY8_STATUS
	
	JMP	S_KEY8_F

S_KEY8_F_RET:
	BRA	CHK_KEY8_QUIT

CHK_KEY8_LOW_S10:
	LDA	#C_S_KEY8_DEBOUNCE ; -DEBOUNCE * 5.33MS
	STA	<R_S_KEY8_DEBOUNCE
	BRA	CHK_KEY8_QUIT
CHK_KEY8_HIGH:
	STZ	R_S_KEY8_DEBOUNCE
	BIT	<R_S_KEY8_STATUS
	BNE	CHK_KEY8_QUIT
	TSB	<R_S_KEY8_STATUS
	
	JMP	S_KEY8_R

S_KEY8_R_RET:
CHK_KEY8_QUIT:
.ENDIF
.IF(C_S_KEY9_ENABLE .EQ. 1)
;check KEY9
CHK_KEY9:
	LDA	#B_S_KEY9
	BIT	!SR_S_KEY9_PORT
	BNE	CHK_KEY9_HIGH
;LOW
	BIT	<R_S_KEY9_STATUS
	BEQ	CHK_KEY9_QUIT
	LDA	<R_S_KEY9_DEBOUNCE
	BEQ	CHK_KEY9_LOW_S10
	INC	<R_S_KEY9_DEBOUNCE
	BNE	CHK_KEY9_QUIT
;GET KEY
	LDA	#B_S_KEY9
	TRB	<R_S_KEY9_STATUS
	
	JMP	S_KEY9_F

S_KEY9_F_RET:
	BRA	CHK_KEY9_QUIT
CHK_KEY9_LOW_S10:
	LDA	#C_S_KEY9_DEBOUNCE ; -DEBOUNCE * 5.33MS
	STA	<R_S_KEY9_DEBOUNCE
	BRA	CHK_KEY9_QUIT
CHK_KEY9_HIGH:
	STZ	R_S_KEY9_DEBOUNCE
	BIT	<R_S_KEY9_STATUS
	BNE	CHK_KEY9_QUIT
	TSB	<R_S_KEY9_STATUS
	
	JMP	S_KEY9_R

S_KEY9_R_RET:

CHK_KEY9_QUIT:
.ENDIF
.IF(C_S_KEY10_ENABLE .EQ. 1)
;check KEY10
CHK_KEY10:
	LDA	#B_S_KEY10
	BIT	!SR_S_KEY10_PORT
	BNE	CHK_KEY10_HIGH
;LOW
	BIT	<R_S_KEY10_STATUS
	BEQ	CHK_KEY10_QUIT
	LDA	<R_S_KEY10_DEBOUNCE
	BEQ	CHK_KEY10_LOW_S10
	INC	<R_S_KEY10_DEBOUNCE
	BNE	CHK_KEY10_QUIT
;GET KEY
	LDA	#B_S_KEY10
	TRB	<R_S_KEY10_STATUS
	
	JMP	S_KEY10_F

S_KEY10_F_RET:
	BRA	CHK_KEY10_QUIT
CHK_KEY10_LOW_S10:
	LDA	#C_S_KEY10_DEBOUNCE ; -DEBOUNCE * 5.33MS
	STA	<R_S_KEY10_DEBOUNCE
	BRA	CHK_KEY10_QUIT
CHK_KEY10_HIGH:
	STZ	R_S_KEY10_DEBOUNCE
	BIT	<R_S_KEY10_STATUS
	BNE	CHK_KEY10_QUIT
	TSB	<R_S_KEY10_STATUS
	
	JMP	S_KEY10_R

S_KEY10_R_RET:

CHK_KEY10_QUIT:
.ENDIF
.IF(C_S_KEY11_ENABLE .EQ. 1)
;check KEY11
CHK_KEY11:
	LDA	#B_S_KEY11
	BIT	!SR_S_KEY11_PORT
	BNE	CHK_KEY11_HIGH
;LOW
	BIT	<R_S_KEY11_STATUS
	BEQ	CHK_KEY11_QUIT
	LDA	<R_S_KEY11_DEBOUNCE
	BEQ	CHK_KEY11_LOW_S10
	INC	<R_S_KEY11_DEBOUNCE
	BNE	CHK_KEY11_QUIT
;GET KEY
	LDA	#B_S_KEY11
	TRB	<R_S_KEY11_STATUS
	
	JMP	S_KEY11_F

S_KEY11_F_RET:
	BRA	CHK_KEY11_QUIT
CHK_KEY11_LOW_S10:
	LDA	#C_S_KEY11_DEBOUNCE ; -DEBOUNCE * 5.33MS
	STA	<R_S_KEY11_DEBOUNCE
	BRA	CHK_KEY11_QUIT
CHK_KEY11_HIGH:
	STZ	R_S_KEY11_DEBOUNCE
	BIT	<R_S_KEY11_STATUS
	BNE	CHK_KEY11_QUIT
	TSB	<R_S_KEY11_STATUS
	
	JMP	S_KEY11_R

S_KEY11_R_RET:

CHK_KEY11_QUIT:
.ENDIF
.IF(C_S_KEY12_ENABLE .EQ. 1)
;check KEY12
CHK_KEY12:
	LDA	#B_S_KEY12
	BIT	!SR_S_KEY12_PORT
	BNE	CHK_KEY12_HIGH
;LOW
	BIT	<R_S_KEY12_STATUS
	BEQ	CHK_KEY12_QUIT
	LDA	<R_S_KEY12_DEBOUNCE
	BEQ	CHK_KEY12_LOW_S10
	INC	<R_S_KEY12_DEBOUNCE
	BNE	CHK_KEY12_QUIT
;GET KEY
	LDA	#B_S_KEY12
	TRB	<R_S_KEY12_STATUS
	
	JMP	S_KEY12_F

S_KEY12_F_RET:
	BRA	CHK_KEY12_QUIT
CHK_KEY12_LOW_S10:
	LDA	#C_S_KEY12_DEBOUNCE ; -DEBOUNCE * 5.33MS
	STA	<R_S_KEY12_DEBOUNCE
	BRA	CHK_KEY12_QUIT
CHK_KEY12_HIGH:
	STZ	R_S_KEY12_DEBOUNCE
	BIT	<R_S_KEY12_STATUS
	BNE	CHK_KEY12_QUIT
	TSB	<R_S_KEY12_STATUS
	
	JMP	S_KEY12_R

S_KEY12_R_RET:

CHK_KEY12_QUIT:
.ENDIF
.IF(C_S_KEY13_ENABLE .EQ. 1)
;check KEY13
CHK_KEY13:
	LDA	#B_S_KEY13
	BIT	!SR_S_KEY13_PORT
	BNE	CHK_KEY13_HIGH
;LOW
	BIT	<R_S_KEY13_STATUS
	BEQ	CHK_KEY13_QUIT
	LDA	<R_S_KEY13_DEBOUNCE
	BEQ	CHK_KEY13_LOW_S10
	INC	<R_S_KEY13_DEBOUNCE
	BNE	CHK_KEY13_QUIT
;GET KEY
	LDA	#B_S_KEY13
	TRB	<R_S_KEY13_STATUS
	
	JMP	S_KEY13_F

S_KEY13_F_RET:
	BRA	CHK_KEY13_QUIT
CHK_KEY13_LOW_S10:
	LDA	#C_S_KEY13_DEBOUNCE ; -DEBOUNCE * 5.33MS
	STA	<R_S_KEY13_DEBOUNCE
	BRA	CHK_KEY13_QUIT
CHK_KEY13_HIGH:
	STZ	R_S_KEY13_DEBOUNCE
	BIT	<R_S_KEY13_STATUS
	BNE	CHK_KEY13_QUIT
	TSB	<R_S_KEY13_STATUS
	
	JMP	S_KEY13_R

S_KEY13_R_RET:

CHK_KEY13_QUIT:
.ENDIF
.IF(C_S_KEY14_ENABLE .EQ. 1)
;check KEY14
CHK_KEY14:
	LDA	#B_S_KEY14
	BIT	!SR_S_KEY14_PORT
	BNE	CHK_KEY14_HIGH
;LOW
	BIT	<R_S_KEY14_STATUS
	BEQ	CHK_KEY14_QUIT
	LDA	<R_S_KEY14_DEBOUNCE
	BEQ	CHK_KEY14_LOW_S10
	INC	<R_S_KEY14_DEBOUNCE
	BNE	CHK_KEY14_QUIT
;GET KEY
	LDA	#B_S_KEY14
	TRB	<R_S_KEY14_STATUS
	
	JMP	S_KEY14_F

S_KEY14_F_RET:
	BRA	CHK_KEY14_QUIT
CHK_KEY14_LOW_S10:
	LDA	#C_S_KEY14_DEBOUNCE ; -DEBOUNCE * 5.33MS
	STA	<R_S_KEY14_DEBOUNCE
	BRA	CHK_KEY14_QUIT
CHK_KEY14_HIGH:
	STZ	R_S_KEY14_DEBOUNCE
	BIT	<R_S_KEY14_STATUS
	BNE	CHK_KEY14_QUIT
	TSB	<R_S_KEY14_STATUS
	
	JMP	S_KEY14_R

S_KEY14_R_RET:

CHK_KEY14_QUIT:
.ENDIF
.IF(C_S_KEY15_ENABLE .EQ. 1)
;check KEY15
CHK_KEY15:
	LDA	#B_S_KEY15
	BIT	!SR_S_KEY15_PORT
	BNE	CHK_KEY15_HIGH
;LOW
	BIT	<R_S_KEY15_STATUS
	BEQ	CHK_KEY15_QUIT
	LDA	<R_S_KEY15_DEBOUNCE
	BEQ	CHK_KEY15_LOW_S10
	INC	<R_S_KEY15_DEBOUNCE
	BNE	CHK_KEY15_QUIT
;GET KEY
	LDA	#B_S_KEY15
	TRB	<R_S_KEY15_STATUS
	
	JMP	S_KEY15_F

S_KEY15_F_RET:
	BRA	CHK_KEY15_QUIT
CHK_KEY15_LOW_S10:
	LDA	#C_S_KEY15_DEBOUNCE ; -DEBOUNCE * 5.33MS
	STA	<R_S_KEY15_DEBOUNCE
	BRA	CHK_KEY15_QUIT
CHK_KEY15_HIGH:
	STZ	R_S_KEY15_DEBOUNCE
	BIT	<R_S_KEY15_STATUS
	BNE	CHK_KEY15_QUIT
	TSB	<R_S_KEY15_STATUS
	
	JMP	S_KEY15_R

S_KEY15_R_RET:

CHK_KEY15_QUIT:
.ENDIF
.IF(C_S_KEY16_ENABLE .EQ. 1)
;check KEY16
CHK_KEY16:
	LDA	#B_S_KEY16
	BIT	!SR_S_KEY16_PORT
	BNE	CHK_KEY16_HIGH
;LOW
	BIT	<R_S_KEY16_STATUS
	BEQ	CHK_KEY16_QUIT
	LDA	<R_S_KEY16_DEBOUNCE
	BEQ	CHK_KEY16_LOW_S10
	INC	<R_S_KEY16_DEBOUNCE
	BNE	CHK_KEY16_QUIT
;GET KEY
	LDA	#B_S_KEY16
	TRB	<R_S_KEY16_STATUS
	
	JMP	S_KEY16_F

S_KEY16_F_RET:
	BRA	CHK_KEY16_QUIT
CHK_KEY16_LOW_S10:
	LDA	#C_S_KEY16_DEBOUNCE ; -DEBOUNCE * 5.33MS
	STA	<R_S_KEY16_DEBOUNCE
	BRA	CHK_KEY16_QUIT
CHK_KEY16_HIGH:
	STZ	R_S_KEY16_DEBOUNCE
	BIT	<R_S_KEY16_STATUS
	BNE	CHK_KEY16_QUIT
	TSB	<R_S_KEY16_STATUS
	
	JMP	S_KEY16_R

S_KEY16_R_RET:

CHK_KEY16_QUIT:
.ENDIF
.IF(C_S_KEY17_ENABLE .EQ. 1)
;check KEY17
CHK_KEY17:
	LDA	#B_S_KEY17
	BIT	!SR_S_KEY17_PORT
	BNE	CHK_KEY17_HIGH
;LOW
	BIT	<R_S_KEY17_STATUS
	BEQ	CHK_KEY17_QUIT
	LDA	<R_S_KEY17_DEBOUNCE
	BEQ	CHK_KEY17_LOW_S10
	INC	<R_S_KEY17_DEBOUNCE
	BNE	CHK_KEY17_QUIT
;GET KEY
	LDA	#B_S_KEY17
	TRB	<R_S_KEY17_STATUS
	
	JMP	S_KEY17_F

S_KEY17_F_RET:
	BRA	CHK_KEY17_QUIT
CHK_KEY17_LOW_S10:
	LDA	#C_S_KEY17_DEBOUNCE ; -DEBOUNCE * 5.33MS
	STA	<R_S_KEY17_DEBOUNCE
	BRA	CHK_KEY17_QUIT
CHK_KEY17_HIGH:
	STZ	R_S_KEY17_DEBOUNCE
	BIT	<R_S_KEY17_STATUS
	BNE	CHK_KEY17_QUIT
	TSB	<R_S_KEY17_STATUS
	
	JMP	S_KEY17_R

S_KEY17_R_RET:

CHK_KEY17_QUIT:
.ENDIF
.IF(C_S_KEY18_ENABLE .EQ. 1)
;check KEY18
CHK_KEY18:
	LDA	#B_S_KEY18
	BIT	!SR_S_KEY18_PORT
	BNE	CHK_KEY18_HIGH
;LOW
	BIT	<R_S_KEY18_STATUS
	BEQ	CHK_KEY18_QUIT
	LDA	<R_S_KEY18_DEBOUNCE
	BEQ	CHK_KEY18_LOW_S10
	INC	<R_S_KEY18_DEBOUNCE
	BNE	CHK_KEY18_QUIT
;GET KEY
	LDA	#B_S_KEY18
	TRB	<R_S_KEY18_STATUS
	
	JMP	S_KEY18_F

S_KEY18_F_RET:
	BRA	CHK_KEY18_QUIT
CHK_KEY18_LOW_S10:
	LDA	#C_S_KEY18_DEBOUNCE ; -DEBOUNCE * 5.33MS
	STA	<R_S_KEY18_DEBOUNCE
	BRA	CHK_KEY18_QUIT
CHK_KEY18_HIGH:
	STZ	R_S_KEY18_DEBOUNCE
	BIT	<R_S_KEY18_STATUS
	BNE	CHK_KEY18_QUIT
	TSB	<R_S_KEY18_STATUS
	
	JMP	S_KEY18_R

S_KEY18_R_RET:

CHK_KEY18_QUIT:
.ENDIF
.IF(C_S_KEY19_ENABLE .EQ. 1)
;check KEY19
CHK_KEY19:
	LDA	#B_S_KEY19
	BIT	!SR_S_KEY19_PORT
	BNE	CHK_KEY19_HIGH
;LOW
	BIT	<R_S_KEY19_STATUS
	BEQ	CHK_KEY19_QUIT
	LDA	<R_S_KEY19_DEBOUNCE
	BEQ	CHK_KEY19_LOW_S10
	INC	<R_S_KEY19_DEBOUNCE
	BNE	CHK_KEY19_QUIT
;GET KEY
	LDA	#B_S_KEY19
	TRB	<R_S_KEY19_STATUS
	
	JMP	S_KEY19_F

S_KEY19_F_RET:
	BRA	CHK_KEY19_QUIT
CHK_KEY19_LOW_S10:
	LDA	#C_S_KEY19_DEBOUNCE ; -DEBOUNCE * 5.33MS
	STA	<R_S_KEY19_DEBOUNCE
	BRA	CHK_KEY19_QUIT
CHK_KEY19_HIGH:
	STZ	R_S_KEY19_DEBOUNCE
	BIT	<R_S_KEY19_STATUS
	BNE	CHK_KEY19_QUIT
	TSB	<R_S_KEY19_STATUS
	
	JMP	S_KEY19_R

S_KEY19_R_RET:

CHK_KEY19_QUIT:
.ENDIF
.IF(C_S_KEY20_ENABLE .EQ. 1)
;check KEY20
CHK_KEY20:
	LDA	#B_S_KEY20
	BIT	!SR_S_KEY20_PORT
	BNE	CHK_KEY20_HIGH
;LOW
	BIT	<R_S_KEY20_STATUS
	BEQ	CHK_KEY20_QUIT
	LDA	<R_S_KEY20_DEBOUNCE
	BEQ	CHK_KEY20_LOW_S10
	INC	<R_S_KEY20_DEBOUNCE
	BNE	CHK_KEY20_QUIT
;GET KEY
	LDA	#B_S_KEY20
	TRB	<R_S_KEY20_STATUS
	
	JMP	S_KEY20_F

S_KEY20_F_RET:
	BRA	CHK_KEY20_QUIT
CHK_KEY20_LOW_S10:
	LDA	#C_S_KEY20_DEBOUNCE ; -DEBOUNCE * 5.33MS
	STA	<R_S_KEY20_DEBOUNCE
	BRA	CHK_KEY20_QUIT
CHK_KEY20_HIGH:
	STZ	R_S_KEY20_DEBOUNCE
	BIT	<R_S_KEY20_STATUS
	BNE	CHK_KEY20_QUIT
	TSB	<R_S_KEY20_STATUS
	
	JMP	S_KEY20_R

S_KEY20_R_RET:

CHK_KEY20_QUIT:
.ENDIF
.IF(C_S_KEY21_ENABLE .EQ. 1)
;check KEY21
CHK_KEY21:
	LDA	#B_S_KEY21
	BIT	!SR_S_KEY21_PORT
	BNE	CHK_KEY21_HIGH
;LOW
	BIT	<R_S_KEY21_STATUS
	BEQ	CHK_KEY21_QUIT
	LDA	<R_S_KEY21_DEBOUNCE
	BEQ	CHK_KEY21_LOW_S10
	INC	<R_S_KEY21_DEBOUNCE
	BNE	CHK_KEY21_QUIT
;GET KEY
	LDA	#B_S_KEY21
	TRB	<R_S_KEY21_STATUS
	
	JMP	S_KEY21_F

S_KEY21_F_RET:
	BRA	CHK_KEY21_QUIT
CHK_KEY21_LOW_S10:
	LDA	#C_S_KEY21_DEBOUNCE ; -DEBOUNCE * 5.33MS
	STA	<R_S_KEY21_DEBOUNCE
	BRA	CHK_KEY21_QUIT
CHK_KEY21_HIGH:
	STZ	R_S_KEY21_DEBOUNCE
	BIT	<R_S_KEY21_STATUS
	BNE	CHK_KEY21_QUIT
	TSB	<R_S_KEY21_STATUS
	
	JMP	S_KEY21_R

S_KEY21_R_RET:

CHK_KEY21_QUIT:
.ENDIF
.IF(C_S_KEY22_ENABLE .EQ. 1)
;check KEY22
CHK_KEY22:
	LDA	#B_S_KEY22
	BIT	!SR_S_KEY22_PORT
	BNE	CHK_KEY22_HIGH
;LOW
	BIT	<R_S_KEY22_STATUS
	BEQ	CHK_KEY22_QUIT
	LDA	<R_S_KEY22_DEBOUNCE
	BEQ	CHK_KEY22_LOW_S10
	INC	<R_S_KEY22_DEBOUNCE
	BNE	CHK_KEY22_QUIT
;GET KEY
	LDA	#B_S_KEY22
	TRB	<R_S_KEY22_STATUS
	
	JMP	S_KEY22_F

S_KEY22_F_RET:
	BRA	CHK_KEY22_QUIT
CHK_KEY22_LOW_S10:
	LDA	#C_S_KEY22_DEBOUNCE ; -DEBOUNCE * 5.33MS
	STA	<R_S_KEY22_DEBOUNCE
	BRA	CHK_KEY22_QUIT
CHK_KEY22_HIGH:
	STZ	R_S_KEY22_DEBOUNCE
	BIT	<R_S_KEY22_STATUS
	BNE	CHK_KEY22_QUIT
	TSB	<R_S_KEY22_STATUS
	
	JMP	S_KEY22_R

S_KEY22_R_RET:

CHK_KEY22_QUIT:
.ENDIF
.IF(C_S_KEY23_ENABLE .EQ. 1)
;check KEY23
CHK_KEY23:
	LDA	#B_S_KEY23
	BIT	!SR_S_KEY23_PORT
	BNE	CHK_KEY23_HIGH
;LOW
	BIT	<R_S_KEY23_STATUS
	BEQ	CHK_KEY23_QUIT
	LDA	<R_S_KEY23_DEBOUNCE
	BEQ	CHK_KEY23_LOW_S10
	INC	<R_S_KEY23_DEBOUNCE
	BNE	CHK_KEY23_QUIT
;GET KEY
	LDA	#B_S_KEY23
	TRB	<R_S_KEY23_STATUS
	
	JMP	S_KEY23_F

S_KEY23_F_RET:
	BRA	CHK_KEY23_QUIT
CHK_KEY23_LOW_S10:
	LDA	#C_S_KEY23_DEBOUNCE ; -DEBOUNCE * 5.33MS
	STA	<R_S_KEY23_DEBOUNCE
	BRA	CHK_KEY23_QUIT
CHK_KEY23_HIGH:
	STZ	R_S_KEY23_DEBOUNCE
	BIT	<R_S_KEY23_STATUS
	BNE	CHK_KEY23_QUIT
	TSB	<R_S_KEY23_STATUS
	
	JMP	S_KEY23_R

S_KEY23_R_RET:

CHK_KEY23_QUIT:
.ENDIF
.IF(C_S_KEY24_ENABLE .EQ. 1)
;check KEY24
CHK_KEY24:
	LDA	#B_S_KEY24
	BIT	!SR_S_KEY24_PORT
	BNE	CHK_KEY24_HIGH
;LOW
	BIT	<R_S_KEY24_STATUS
	BEQ	CHK_KEY24_QUIT
	LDA	<R_S_KEY24_DEBOUNCE
	BEQ	CHK_KEY24_LOW_S10
	INC	<R_S_KEY24_DEBOUNCE
	BNE	CHK_KEY24_QUIT
;GET KEY
	LDA	#B_S_KEY24
	TRB	<R_S_KEY24_STATUS
	
	JMP	S_KEY24_F

S_KEY24_F_RET:
	BRA	CHK_KEY24_QUIT
CHK_KEY24_LOW_S10:
	LDA	#C_S_KEY24_DEBOUNCE ; -DEBOUNCE * 5.33MS
	STA	<R_S_KEY24_DEBOUNCE
	BRA	CHK_KEY24_QUIT
CHK_KEY24_HIGH:
	STZ	R_S_KEY24_DEBOUNCE
	BIT	<R_S_KEY24_STATUS
	BNE	CHK_KEY24_QUIT
	TSB	<R_S_KEY24_STATUS
	
	JMP	S_KEY24_R

S_KEY24_R_RET:

CHK_KEY24_QUIT:
.ENDIF
	RTS


